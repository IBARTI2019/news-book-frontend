<mat-card>
    <app-card-header modulo="Personas" menu="{{ update ? 'Actualizar Persona' : 'Crear Persona' }}">
    </app-card-header>
    <mat-card-content>
        <form [formGroup]="fg" fxLayout="column" fxLayoutGap="5px" (ngSubmit)="onSubmit()" #formRol>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">
                <!-- <mat-form-field>
                    <mat-label>Codigo</mat-label>
                    <input matInput placeholder="Codigo" formControlName="code">
                </mat-form-field>-->
                <mat-form-field>
                    <mat-label>Cedula</mat-label>
                    <input matInput placeholder="Cedula" formControlName="doc_ident">
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Tipo</mat-label>
                    <mat-select formControlName="type_person">
                        <mat-option *ngFor="let type of listap" [value]="type.id">{{ type.description | titlecase }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">
                <mat-form-field>
                    <mat-label>Nombres</mat-label>
                    <input matInput placeholder="Nombres" formControlName="name">
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Apellidos</mat-label>
                    <input matInput placeholder="Apellidos" formControlName="last_name">
                </mat-form-field>
            </div>

            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">

                <mat-form-field>
                    <mat-label>Telefono Habitacion</mat-label>
                    <input matInput placeholder="Telefono hab" formControlName="phone">
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Movil</mat-label>
                    <input matInput placeholder="Celular" formControlName="mobile">
                </mat-form-field>

                <!--<mat-form-field>
                    <mat-label>Direccion</mat-label>
                    <input matInput placeholder="Direccion" formControlName="address">
                </mat-form-field>-->
                <!-- <mat-form-field>
                    <mat-label>Tipo Persona</mat-label>
                    <mat-select formControlName="type_person" placeholder="Tipo de Persona">
                        <mat-option *ngFor="let personan of listap" [value]="personan.id">{{personan.description}}
                        </mat-option>
                    </mat-select>
                </mat-form-field> -->

            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">
                <mat-form-field *ngIf="requiredCompanyData(fg.controls.type_person.value)">
                    <mat-label>Empresa</mat-label>
                    <input matInput placeholder="Empresa" formControlName="company">
                </mat-form-field>
                <mat-form-field *ngIf="requiredCompanyData(fg.controls.type_person.value)">
                    <mat-label>RIF</mat-label>
                    <input matInput placeholder="RIF" formControlName="rif">
                </mat-form-field>
           
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">
                <div fxFlex="50">
                    <mat-slide-toggle formControlName="is_active">Activo</mat-slide-toggle>
                </div>
                <div fxFlex="50">
                    <mat-slide-toggle formControlName="blacklist">Lista Negra</mat-slide-toggle>
                </div>
            </div>
            <br>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">
                <mat-form-field *ngIf="fg.controls.blacklist.value">
                    <mat-label>Motivo de lista negra</mat-label>
                    <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                        cdkAutosizeMaxRows="10" formControlName="blacklist_reason"></textarea>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px">
                <div fxFlex="100">
                    <mat-form-field *ngIf="requiredCompanyData(fg.controls.type_person.value)">
                        <mat-label>Lugar de recibimiento</mat-label>
                        <input matInput placeholder="Lugar de recibimiento" formControlName="default_visit_location">
                    </mat-form-field>
        
                </div>
                <div fxFlex="100">
                    <mat-form-field *ngIf="fg.controls.blacklist.value">
                        <mat-label>Motivo de visita</mat-label>
                        <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                            cdkAutosizeMaxRows="10" formControlName="default_visit_reason"></textarea>
                    </mat-form-field>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px" fxLayoutAlign="end">
                <button mat-raised-button type="button" [mat-dialog-close]="updated">Cerrar</button>
                <button mat-raised-button color="primary" type="submit">{{ update ? 'Actualizar' : 'Crear' }}</button>
            </div>
        </form>
    </mat-card-content>
</mat-card>