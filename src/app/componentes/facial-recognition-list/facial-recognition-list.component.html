<h1
  mat-dialog-title
  class="text-2xl font-semibold text-gray-800 border-b pb-4 mb-4"
>
  Seleccionar Reconocimiento
</h1>

<div mat-dialog-content class="mat-typography">
  <p class="text-gray-600 mb-6">
    Por favor, selecciona el evento de reconocimiento correcto.
  </p>

  <div class="search-container" style="padding: 16px">
    <mat-form-field appearance="outline" style="width: 100%">
      <mat-label>Buscar reconocimientos</mat-label>
      <input
        matInput
        [(ngModel)]="searchTerm"
        (input)="applyFilter()"
        placeholder="Buscar..."
      />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <!-- Tu lista existente, modifícala para usar filteredRecognitions -->
  <mat-selection-list (selectionChange)="onSelectionChange($event)">
    <mat-list-option
      *ngFor="let recognition of filteredRecognitions"
      [value]="recognition"
      [class.selected-recognition]="selectedRecognition?.id === recognition.id"
    >
      <div class="recognition-option">
        <!-- Contenido de tu item de reconocimiento -->
        <div style="display: flex; align-items: center; gap: 12px">
          <mat-icon style="color: #1976d2">person</mat-icon>
          <div style="flex: 1">
            <div style="font-weight: 500">ID: {{ recognition.user_id }}</div>
            <div style="font-weight: 500">
              Nombre: {{ recognition.user_name }}
            </div>
            <div style="font-size: 14px; color: #666">
              {{ recognition.event_time | date : "medium" }}
            </div>
            <p class="text-sm text-gray-500">
              <span class="font-semibold">Tipo:</span>
              <span
                [ngClass]="
                  recognition.movement_type === 'IN'
                    ? 'text-green-600'
                    : 'text-red-600'
                "
              >
                {{ recognition.movement_type === "IN" ? "ENTRADA" : "SALIDA" }}
              </span>
            </p>
          </div>
          <mat-icon
            [ngClass]="
              recognition.movement_type === 'IN'
                ? 'text-green-500 bg-green-100'
                : 'text-red-500 bg-red-100'
            "
            class="mr-6 text-4xl rounded-full p-2"
          >
            {{
              recognition.movement_type === "IN"
                ? "arrow_downward"
                : "arrow_upward"
            }}
          </mat-icon>
        </div>
      </div>
    </mat-list-option>
  </mat-selection-list>

  <div
    *ngIf="filteredRecognitions.length === 0 && recognitions.length > 0"
    style="text-align: center; padding: 20px; color: #666"
  >
    <mat-icon>search_off</mat-icon>
    <p>
      No se encontraron reconocimientos que coincidan con "{{ searchTerm }}"
    </p>
  </div>
</div>

<div mat-dialog-actions align="end" class="pt-4 border-t mt-4">
  <button mat-stroked-button (click)="onCancel()" class="mr-2">Cancelar</button>
  <button
    mat-flat-button
    color="primary"
    [mat-dialog-close]="selectedRecognition"
    [disabled]="!selectedRecognition"
  >
    Confirmar Selección
  </button>
</div>
